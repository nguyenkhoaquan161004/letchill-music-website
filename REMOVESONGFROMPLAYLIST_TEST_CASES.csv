Test Case ID,Test Case Description,PreRequisites,Step,Steps to Perform,Step Expected Result,Test Case Expected Result,Actual Result,Status,Type,Note,Platform
FT18-01,Permission denied - show MSG 18 when user is not owner,"Playlist exists with different owner, User logged in as different user","Bước 1","User clicks 'Xóa bài hát' button to initiate song removal","Delete button is clicked by non-owner user","Dialog or confirmation modal appears","Passed","Passed","Automation","Validates BR19 initial step","Frontend"
FT18-01,Permission denied - show MSG 18 when user is not owner,"Playlist exists with different owner, User logged in as different user","Bước 2","System retrieves playlist owner information from database to verify ownership","Query sent to fetch playlist metadata with MaNguoiDung field","Playlist owner information is retrieved (MaNguoiDung = 'different-user-456')","Passed","Passed","Automation","BR19 step 1 - fetch playlist info","Frontend"
FT18-01,Permission denied - show MSG 18 when user is not owner,"Playlist exists with different owner, User logged in as different user","Bước 3","Permission check fails because uid (test-user-123) != playlist owner (different-user-456)","Permission validation compares user uid with playlist MaNguoiDung","uid does NOT match owner, access denied","Passed","Passed","Automation","BR19 step 2 - ownership check fails","Frontend"
FT18-01,Permission denied - show MSG 18 when user is not owner,"Playlist exists with different owner, User logged in as different user","Bước 4","Display error message MSG 18 'Quyền bị từ chối' to user","Error toast/alert shows permission denied message","User sees MSG 18: 'Bạn không có quyền xóa bài hát từ danh sách phát này'","Passed","Passed","Automation","BR19 step 3 - show permission error","Frontend"
FT18-02,User cancels confirmation - operation aborted,"Playlist opened by owner, Delete dialog ready to confirm","Bước 1","User clicks 'Xóa bài hát' button on song in playlist","Delete button is clicked on a song from the owner's playlist","Confirmation dialog appears with 'Xác nhận xóa?' message","Passed","Passed","Automation","Validates BR19 confirmation flow","Frontend"
FT18-02,User cancels confirmation - operation aborted,"Playlist opened by owner, Delete dialog ready to confirm","Bước 2","System retrieves playlist owner information and verifies user is owner","Query to fetch playlist metadata with MaNguoiDung field","uid matches playlist owner MaNguoiDung, ownership verified","Passed","Passed","Automation","BR19 step 1-2 - ownership check passes","Frontend"
FT18-02,User cancels confirmation - operation aborted,"Playlist opened by owner, Delete dialog ready to confirm","Bước 3","Permission check succeeds, confirm dialog displays 'Bạn có chắc chắn muốn xóa bài hát này?'","Confirmation dialog shows with Cancel and Delete buttons","User sees confirmation dialog with two action options","Passed","Passed","Automation","BR19 step 3 - show confirmation dialog","Frontend"
FT18-02,User cancels confirmation - operation aborted,"Playlist opened by owner, Delete dialog ready to confirm","Bước 4","User clicks 'Hủy' (Cancel) button to abort the deletion","Cancel button is clicked by user on confirmation dialog","Deletion operation is cancelled","Passed","Passed","Automation","BR19 step 4 - user cancels action","Frontend"
FT18-02,User cancels confirmation - operation aborted,"Playlist opened by owner, Delete dialog ready to confirm","Bước 5","No DELETE API call is made, dialog closes and returns to playlist view","Confirm dialog closes without making DELETE request","No DELETE /api/playlistsongs/{songId} request sent to backend","Passed","Passed","Automation","BR19 step 5 - no API call on cancel","Frontend"
FT18-02,User cancels confirmation - operation aborted,"Playlist opened by owner, Delete dialog ready to confirm","Bước 6","User remains on playlist view, song is still in list, no changes made","Playlist view is displayed with all songs intact","User sees playlist unchanged, can attempt delete again or navigate away","Passed","Passed","Automation","BR19 final step - cancelled operation","Frontend"
FT18-03,Successful removal - song removed from playlist,"Playlist opened by owner, Song selected for removal, Confirmed deletion","Bước 1","User confirms deletion by clicking 'Xóa' (Delete) button in confirmation dialog","Delete button is clicked after confirmation dialog appears","DELETE request is prepared to be sent to backend","Passed","Passed","Automation","Validates BR20 step 1 - deletion initiation","Frontend"
FT18-03,Successful removal - song removed from playlist,"Playlist opened by owner, Song selected for removal, Confirmed deletion","Bước 2","Frontend sends DELETE request to /api/playlistsongs/{songId} with uid parameter","DELETE /api/playlistsongs/123?uid=test-user-123 is sent","Backend receives and processes the DELETE request","Passed","Passed","Automation","BR20 step 1 - send DELETE request","Frontend"
FT18-03,Successful removal - song removed from playlist,"Playlist opened by owner, Song selected for removal, Confirmed deletion","Bước 3","Backend receives DELETE request and deletes song from CT_DanhSachPhat table","Database DELETE query: WHERE MaDanhSach = 123 AND MaBaiHat = songId","Song record is removed from CT_DanhSachPhat table","Passed","Passed","Automation","BR20 step 2 - database deletion","Frontend"
FT18-03,Successful removal - song removed from playlist,"Playlist opened by owner, Song selected for removal, Confirmed deletion","Bước 4","Backend returns success response with removed song details","API returns {success: true, playlistId, removedSongId}","Frontend receives confirmation that song was deleted","Passed","Passed","Automation","BR20 step 3 - success response received","Frontend"
FT18-04,Metadata update - song count decremented and modified date updated,"Song removed from playlist, Metadata update needed","Bước 1","After song deletion, backend updates playlist metadata in DanhSachPhat table","Metadata update query triggered after CT_DanhSachPhat DELETE completes","Backend prepares metadata update","Passed","Passed","Automation","Validates BR20 step 2 metadata update","Frontend"
FT18-04,Metadata update - song count decremented and modified date updated,"Song removed from playlist, Metadata update needed","Bước 2","Backend decrements SoLuongBaiHat by 1 (5 → 4) and updates NgayChinhSua to current date","Database UPDATE: SoLuongBaiHat = SoLuongBaiHat - 1, NgayChinhSua = NOW()","Playlist record shows reduced song count and updated modification date","Passed","Passed","Automation","BR20 step 2 - metadata updated","Frontend"
FT18-04,Metadata update - song count decremented and modified date updated,"Song removed from playlist, Metadata update needed","Bước 3","Metadata update is confirmed and returns updated playlist information","API response includes {playlistId, songCount: 4, modifiedDate: ISO timestamp}","Frontend receives updated metadata showing new count and timestamp","Passed","Passed","Automation","BR20 metadata verification","Frontend"
FT18-05,UI refresh and toast - show MSG 20 after successful removal,"Song successfully removed, Backend returned success response","Bước 1","Backend sends success response with MSG 20 message to frontend after removal complete","Response returns {success: true, message: 'Xoá bài hát khỏi danh sách phát thành công!'}","Success message received from backend","Passed","Passed","Automation","Validates BR20 step 4 - success message","Frontend"
FT18-05,UI refresh and toast - show MSG 20 after successful removal,"Song successfully removed, Backend returned success response","Bước 2","Frontend closes the confirmation dialog after receiving success response","Dialog component closes automatically after successful deletion","Confirmation dialog is dismissed from screen","Passed","Passed","Automation","BR20 step 4 - close dialog","Frontend"
FT18-05,UI refresh and toast - show MSG 20 after successful removal,"Song successfully removed, Backend returned success response","Bước 3","Display success toast notification MSG 20 with message 'Xoá bài hát khỏi danh sách phát thành công!'","Toast component renders with success message","User sees success toast notification on screen for 2-3 seconds","Passed","Passed","Automation","BR20 step 4 - show success toast","Frontend"
FT18-05,UI refresh and toast - show MSG 20 after successful removal,"Song successfully removed, Backend returned success response","Bước 4","Frontend refreshes playlist list data to remove deleted song from UI","Playlist data is fetched or state is updated to reflect removal","Deleted song is removed from playlist view, song count updates","Passed","Passed","Automation","BR20 step 5 - UI refresh","Frontend"
FT18-05,UI refresh and toast - show MSG 20 after successful removal,"Song successfully removed, Backend returned success response","Bước 5","Verify playlist view displays updated playlist without the deleted song","Playlist list shows remaining songs with new count in header","All changes reflected in UI, user sees updated playlist state","Passed","Passed","Automation","BR20 final verification","Frontend"
FT18-06,Error handling - handle removal failure gracefully,"Removal operation failed, API returned error response","Bước 1","Backend fails to delete song (network error, server error, etc)","DELETE request sent but returns {ok: false, error: 'Failed to remove song'}","Error response received from backend","Passed","Passed","Automation","Validates BR20 error handling","Frontend"
FT18-06,Error handling - handle removal failure gracefully,"Removal operation failed, API returned error response","Bước 2","Frontend receives error response and processes the failure","Response status indicates error (400, 500, etc) with error message","Error is detected and handled by frontend","Passed","Passed","Automation","BR20 error handling step 1","Frontend"
FT18-06,Error handling - handle removal failure gracefully,"Removal operation failed, API returned error response","Bước 3","Display error notification to user and keep dialog open for retry","Error toast shows message like 'Không thể xóa bài hát, vui lòng thử lại'","User sees error message and confirmation dialog remains open","Passed","Passed","Automation","BR20 error handling step 2","Frontend"
FT18-06,Error handling - handle removal failure gracefully,"Removal operation failed, API returned error response","Bước 4","Allow user to retry deletion or cancel operation from dialog","Dialog shows Cancel and Delete buttons again for user action","User can click Delete to retry or Cancel to abort","Passed","Passed","Automation","BR20 error handling - allow retry","Frontend"
FT18-06,Error handling - handle removal failure gracefully,"Removal operation failed, API returned error response","Bước 5","Playlist remains unchanged with all original songs if deletion fails","Playlist data is not modified, song remains in list","Song is still present in playlist after failed deletion attempt","Passed","Passed","Automation","BR20 final - data integrity preserved","Frontend"
FT18-07,Permission denied API - return error when user is not owner,"Different user attempts removal, Playlist owned by different user","Bước 1","Frontend sends DELETE request to /api/playlistsongs/{songId} with non-owner uid","DELETE /api/playlistsongs/8888?uid=different-user-789 sent to backend","Backend receives DELETE request with non-owner uid","Passed","Passed","Automation","Validates BR19 API authorization check","Backend"
FT18-07,Permission denied API - return error when user is not owner,"Different user attempts removal, Playlist owned by different user","Bước 2","Backend queries DanhSachPhat to verify playlist ownership","Query: SELECT MaNguoiDung FROM DanhSachPhat WHERE MaDanhSach = 888","Playlist owner uid is retrieved and compared with requesting uid","Passed","Passed","Automation","BR19 API step 1 - fetch owner","Backend"
FT18-07,Permission denied API - return error when user is not owner,"Different user attempts removal, Playlist owned by different user","Bước 3","Backend permission check fails: uid (different-user-789) != owner (test-user-456)","Permission validation fails, access is denied","Request is rejected","Passed","Passed","Automation","BR19 API step 2 - permission check fails","Backend"
FT18-07,Permission denied API - return error when user is not owner,"Different user attempts removal, Playlist owned by different user","Bước 4","Return 403 Forbidden or 400 Bad Request error response","API responds with status 403 or 400 with error message","Non-owner cannot delete songs from playlist","Passed","Passed","Automation","BR19 API security - authorization denied","Backend"
FT18-08,Confirmation check API - verify permission before removal,"Owner user attempts removal, Ownership verified","Bước 1","Frontend sends DELETE request to /api/playlistsongs/{songId} with owner uid","DELETE /api/playlistsongs/8888?uid=test-user-456 sent to backend","Backend receives DELETE request with owner uid","Passed","Passed","Automation","Validates BR19 API permission flow","Backend"
FT18-08,Confirmation check API - verify permission before removal,"Owner user attempts removal, Ownership verified","Bước 2","Backend queries DanhSachPhat to verify playlist ownership","Query: SELECT MaNguoiDung FROM DanhSachPhat WHERE MaDanhSach = 888","Playlist owner uid is retrieved and compared","Passed","Passed","Automation","BR19 API step 1 - fetch owner info","Backend"
FT18-08,Confirmation check API - verify permission before removal,"Owner user attempts removal, Ownership verified","Bước 3","Backend permission check succeeds: uid (test-user-456) == owner (test-user-456)","Permission validation passes, access is allowed","Request is accepted for processing","Passed","Passed","Automation","BR19 API step 2 - permission check passes","Backend"
FT18-08,Confirmation check API - verify permission before removal,"Owner user attempts removal, Ownership verified","Bước 4","Continue with BR20 deletion logic after permission verification","No error thrown, deletion process continues","System proceeds to delete the song from playlist","Passed","Passed","Automation","BR19 API clear to proceed with deletion","Backend"
FT18-09,Successful removal API - song removed from playlist,"Owner verified, Delete confirmed, Song in playlist","Bước 1","Backend receives authorized DELETE request to remove song from playlist","DELETE /api/playlistsongs/{songId} with valid owner uid processed","Backend validates all parameters and prepares deletion","Passed","Passed","Automation","Validates BR20 API deletion start","Backend"
FT18-09,Successful removal API - song removed from playlist,"Owner verified, Delete confirmed, Song in playlist","Bước 2","Backend executes DELETE query on CT_DanhSachPhat table","Database DELETE: WHERE MaDanhSach = 888 AND MaBaiHat = 8888","Song record is deleted from CT_DanhSachPhat table","Passed","Passed","Automation","BR20 API step 1 - database deletion","Backend"
FT18-09,Successful removal API - song removed from playlist,"Owner verified, Delete confirmed, Song in playlist","Bước 3","Verify deletion was successful by checking database","Query confirms song no longer exists in CT_DanhSachPhat for playlist 888","Song is no longer in the playlist (deletion verified)","Passed","Passed","Automation","BR20 API verification - song deleted","Backend"
FT18-10,Metadata update API - song count decremented and modified date updated,"Song deleted from playlist, Metadata update triggered","Bước 1","Backend triggers metadata update after successful song deletion","Metadata update query sent after CT_DanhSachPhat DELETE completes","Backend prepares to update DanhSachPhat table","Passed","Passed","Automation","Validates BR20 API metadata update","Backend"
FT18-10,Metadata update API - song count decremented and modified date updated,"Song deleted from playlist, Metadata update triggered","Bước 2","Backend decrements SoLuongBaiHat by 1 and updates NgayChinhSua to current date","Database PATCH: {SoLuongBaiHat: count - 1, NgayChinhSua: NOW()}","Playlist metadata record is updated in DanhSachPhat table","Passed","Passed","Automation","BR20 API step 2 - metadata updated","Backend"
FT18-10,Metadata update API - song count decremented and modified date updated,"Song deleted from playlist, Metadata update triggered","Bước 3","Verify metadata update completes successfully","Response returns {success: true, playlistId, songCount, modifiedDate}","Metadata reflects correct updated values","Passed","Passed","Automation","BR20 API metadata verification","Backend"
FT18-11,Error handling API - handle removal failure gracefully,"Removal operation fails, Invalid songId used","Bước 1","Frontend sends DELETE request with invalid songId (99999) for non-existent song","DELETE /api/playlistsongs/99999?uid=test-user-456 sent to backend","Backend receives DELETE request for non-existent song","Passed","Passed","Automation","Validates BR20 API error handling","Backend"
FT18-11,Error handling API - handle removal failure gracefully,"Removal operation fails, Invalid songId used","Bước 2","Backend queries CT_DanhSachPhat to find song in playlist","Query: SELECT * FROM CT_DanhSachPhat WHERE MaDanhSach = 888 AND MaBaiHat = 99999","No matching record found (song does not exist in this playlist)","Passed","Passed","Automation","BR20 API step 1 - song not found","Backend"
FT18-11,Error handling API - handle removal failure gracefully,"Removal operation fails, Invalid songId used","Bước 3","Backend detects error condition and returns appropriate error response","API returns status 404 or 400 with error message","Request is rejected gracefully with error indication","Passed","Passed","Automation","BR20 API error response","Backend"
FT18-11,Error handling API - handle removal failure gracefully,"Removal operation fails, Invalid songId used","Bước 4","Frontend handles error and keeps dialog open allowing user to retry or cancel","Frontend receives error response and processes failure state","User dialog remains open for further action (retry or cancel)","Passed","Passed","Automation","BR20 API error handling - dialog remains open","Backend"